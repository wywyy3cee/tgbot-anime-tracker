# Telegram-бот для отслеживания аниме ShikiAnime 
## Введение

### Автор
```
Златов Владислав - группа 5130904/30102
```

### Определение проблемы
Пользователям, активно следящим за аниме, неудобно каждый раз открывать браузер, заходить на сайт Shikimori.one и искать информацию вручную. Особенно раздражает делать это с мобильного телефона — интерфейс сайта не всегда адаптивен, нужно скроллить, вводить запросы, переключаться между вкладками. Гораздо проще и быстрее получать те же данные прямо в Telegram, где пользователи и так общаются, читают новости и проводят много времени — не выходя из привычного мессенджера.

### Пользовательские сценарии
1. Когда я ищу аниме по названию или ключевым словам, я хочу быстро находить нужные тайтлы с полной и структурированной информацией, включая оценки сообщества, список жанров, статус выпуска, количество эпизодов и качественные постеры, чтобы принимать обоснованное решение о просмотре на основе актуальных и проверенных данных, не переключаясь между разными сайтами и источниками.
2. Когда я нахожу интересное аниме через поиск, я хочу сохранять его в избранное, ставить персональные оценки и просматривать свою подборку, чтобы создавать персонализированную библиотеку просмотренного и запланированного контента, отслеживать свой прогресс и делиться рекомендациями с друзьями, имея быстрый доступ к истории своих оценок и сохраненных тайтлов.


## Архитектура проекта
### Характер нагрузки на сервис
Оценочное число пользователей: ~2 500 активных пользователей в сутки
#### 1. Соотношение R/W нагрузки
- Чтение: ~85% — Преобладают операции поиска аниме, получения детальной информации, просмотра избранного и рейтингов.
- Запись: ~15% — Добавление/удаление из избранного, обновление рейтингов пользователей, кеширование данных.

### C4-диаграммы
#### C4-context
![context](./docs/images/c4_context.png)

#### C4-container
![container](./docs/images/c4_container.png)

## Тестирование
Запуск тестирования и приложения:
```bash
docker compose up -d
docker compose -f docker-compose.test.yml up --build --abort-on-container-exit
```

Контейнер init автоматически выполняет все проверки (сборка, тесты). Контейнер app запускается только если все тесты прошли успешно.

Остановка:

```bash
docker compose down
```

Полная очистка данных:

```bash
docker compose down -v
```

Просмотр логов инициализации:

```bash
docker compose logs init
```

Просмотр логов приложения:

```bash
docker compose logs app
```

Структура тестов:

- internal/ - юнит тесты для компонентов проекта
- tests/e2e/ - полный сценарий поиска аниме
- tests/integration/ - тесты интеграции компонентов с БД и Redis


